<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>redis 命令学习(一) | yakeZhang&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="String操作命令String 是 redis 中最基础的数据类型， redis 字符串是二进制安全的，这意味着他们有一个已知的长度没有任何特殊字符终止，所以你可以存储任何东西，512兆为上限。">
<meta property="og:type" content="article">
<meta property="og:title" content="redis 命令学习(一)">
<meta property="og:url" content="http://yake987.github.io/2015/11/24/redis01/index.html">
<meta property="og:site_name" content="yakeZhang's blog">
<meta property="og:description" content="String操作命令String 是 redis 中最基础的数据类型， redis 字符串是二进制安全的，这意味着他们有一个已知的长度没有任何特殊字符终止，所以你可以存储任何东西，512兆为上限。">
<meta property="og:updated_time" content="2016-01-18T10:48:16.702Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="redis 命令学习(一)">
<meta name="twitter:description" content="String操作命令String 是 redis 中最基础的数据类型， redis 字符串是二进制安全的，这意味着他们有一个已知的长度没有任何特殊字符终止，所以你可以存储任何东西，512兆为上限。">
  
    <link rel="alternative" href="/atom.xml" title="yakeZhang&#39;s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
  <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <script>
      var yiliaConfig = {
          fancybox: true,
          animate: true,
          isHome: false,
          isPost: true,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            
            <img lazy-src="/img/avatar.png" class="js-avatar">
            
        </a>

        <hgroup>
          <h1 class="header-author"><a href="/">yakeZhang</a></h1>
        </hgroup>

        
                


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/music">音乐欣赏</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <li id="Email"><a class="Email" target="_blank" href="mailto:zhangykvip@126.com" title="Email"></a></li>
                            
                                <li id="新浪微博"><a class="新浪微博" target="_blank" href="http://weibo.com/jaakzh" title="新浪微博"></a></li>
                            
                                <li id="GitHub"><a class="GitHub" target="_blank" href="https://github.com/yake987" title="GitHub"></a></li>
                            
                                <li id="知乎"><a class="知乎" target="_blank" href="https://www.zhihu.com/people/" title="知乎"></a></li>
                            
                                <li id="RSS"><a class="RSS" target="_blank" href="/atom.xml" title="RSS"></a></li>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/mongoose/" style="font-size: 10px;">mongoose</a> <a href="/tags/redis/" style="font-size: 20px;">redis</a>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">node、php程序猿</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">yakeZhang</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img lazy-src="/img/avatar.png" class="js-avatar">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">yakeZhang</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/music">音乐欣赏</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <li id="Email"><a class="Email" target="_blank" href="mailto:zhangykvip@126.com" title="Email"></a></li>
                            
                                <li id="新浪微博"><a class="新浪微博" target="_blank" href="http://weibo.com/jaakzh" title="新浪微博"></a></li>
                            
                                <li id="GitHub"><a class="GitHub" target="_blank" href="https://github.com/yake987" title="GitHub"></a></li>
                            
                                <li id="知乎"><a class="知乎" target="_blank" href="https://www.zhihu.com/people/" title="知乎"></a></li>
                            
                                <li id="RSS"><a class="RSS" target="_blank" href="/atom.xml" title="RSS"></a></li>
                            
                        </ul>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap"><article id="post-redis01" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/24/redis01/" class="article-date">
      <time datetime="2015-11-24T12:11:07.000Z" itemprop="datePublished">2015-11-24</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      redis 命令学习(一)
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        

        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/redis/">redis</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h4 id="String操作命令">String操作命令</h4><p>String 是 redis 中最基础的数据类型， redis 字符串是二进制安全的，这意味着他们有一个已知的长度没有任何特殊字符终止，所以你可以存储任何东西，512兆为上限。<br><a id="more"></a></p>
<h4 id="SET命令_-_添加键值">SET命令  - 添加键值</h4><p>SET命令是将字符串值 value 关联到 key 。</p>
<p>语法格式：<br><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET key value <span class="string">[EX seconds]</span> <span class="string">[PX milliseconds]</span> <span class="string">[NX|XX]</span></span><br></pre></td></tr></table></figure></p>
<p> 如果 key 已经持有其他值，SET就覆写旧值，无视类型。因此，对于某个原本带有生存时间（TTL）的键来说， 当SET命令成功在这个键上执行时， 这个键原有的 TTL 将被清除。<br>示例：添加键key1，值为”test”<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; SET key1 <span class="string">"test"</span></span><br><span class="line">OK</span><br></pre></td></tr></table></figure></p>
<h4 id="SETEX命令_-_添加值和生存时间">SETEX命令  - 添加值和生存时间</h4><p>　　SETEX命令的作用是将值 value 关联到 key ，并将 key 的生存时间设为 seconds (以秒为单位)。如果 key 已经存在， SETEX命令将覆写旧值<br>语法格式：<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SETEX key <span class="built_in">seconds</span> <span class="built_in">value</span></span><br></pre></td></tr></table></figure></p>
<p>示例 - 设置name的值为‘jaak’，生存时间为60秒。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; SETEX name <span class="number">60</span> <span class="string">"jaak"</span></span><br><span class="line">OK</span><br></pre></td></tr></table></figure></p>
<p>SETEX命令的作用类似如下两个命令：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">SET</span> <span class="keyword">name</span> <span class="string">"jaak"</span></span><br><span class="line"><span class="keyword">EXPIRE</span> <span class="keyword">name</span> <span class="number">60</span>  # 设置生存时间</span></span><br></pre></td></tr></table></figure></p>
<p>不同之处是，SETEX是一个原子性(atomic)操作， 关联值 和 设置生存时间 两个动作会在同一时间内完成，该命令在 Redis 用作缓存时，非常实用。</p>
<h4 id="GET命令_-_获取字符串">GET命令 - 获取字符串</h4><p>　　GET命令是返回 key 所关联的字符串值。如果 key 不存在那么返回特殊值 nil 。假如 key 储存的值不是字符串类型，返回一个错误，因为GET只能用于处理字符串值<br>语法格式：<br><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GET</span> <span class="keyword">key</span></span><br></pre></td></tr></table></figure></p>
<p>示例 - 获取name和key的值。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">127<span class="class">.0</span><span class="class">.0</span><span class="class">.1</span><span class="pseudo">:6379</span>&gt; <span class="tag">GET</span> <span class="tag">name</span></span><br><span class="line">"<span class="tag">jaak</span>"</span><br><span class="line">127<span class="class">.0</span><span class="class">.0</span><span class="class">.1</span><span class="pseudo">:6379</span>&gt; <span class="tag">GET</span> <span class="tag">key</span></span><br><span class="line">(<span class="tag">nil</span>)</span><br><span class="line">返回值</span><br></pre></td></tr></table></figure></p>
<p>当key不存在时，返回nil，否则返回key的值。<br>如果key的值不是字符串类型，那么将会返回一个错误。</p>
<h4 id="APPEND命令_-_追加字符串">APPEND命令 - 追加字符串</h4><p>如果 key 已经存在并且是一个字符串，APPEND命令将 value 追加到 key 原来的值的末尾，<br>语法格式：<br><figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">APPEND <span class="built_in">key</span> <span class="built_in">value</span></span><br></pre></td></tr></table></figure></p>
<p>示例 - 向name追加字符‘ zhang’。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; APPEND name <span class="string">" zhang"</span>    <span class="preprocessor"># 对已存在的字符串进行 APPEND</span></span><br><span class="line">(integer) <span class="number">10</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; GET name</span><br><span class="line">“jaak zhang<span class="string">"</span></span><br></pre></td></tr></table></figure>
<p>如果 key 不存在，APPEND就简单地将给定 key 设为 value ，就像执行 SET key value 一样。</p>
<h4 id="MSET命令_-_添加多个键值">MSET命令 - 添加多个键值</h4><p>　　MSET命令可以同时设置一个或多个 key-value 对，如果某个给定 key 已经存在，那么MSET会用新值覆盖原来的旧值<br>语法格式：<br><figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MSET <span class="built_in">key</span> <span class="built_in">value</span> [<span class="built_in">key</span> <span class="built_in">value</span> ...]</span><br></pre></td></tr></table></figure></p>
<p>示例 - 设置name、age和number的值。</p>
<p>127.0.0.1:6379&gt; MSET name “jaak” age “24” number “158234232”<br>OK<br>MSET是一个原子性(atomic)操作，所有给定 key 都会在同一时间内被设置，某些给定 key 被更新而另一些给定 key 没有改变的情况，不可能发生。</p>
<h4 id="MGET命令_-_获取多个键值">MGET命令 - 获取多个键值</h4><p>执行MGET命令，将返回所有(一个或多个)给定 key 的值<br>语法格式：<br><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MGET <span class="variable">key</span> [<span class="variable">key</span> ...]</span><br></pre></td></tr></table></figure></p>
<p>示例 - 获取name、age、number  、sex的值。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; MGET name age number  sex</span><br><span class="line"><span class="number">1</span>) <span class="string">"jaak"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"24"</span></span><br><span class="line"><span class="number">3</span>) <span class="string">"158234232"</span></span><br><span class="line"><span class="number">4</span>) (nil)</span><br></pre></td></tr></table></figure></p>
<p>如果给定的 key 里面，有某个 key 不存在，那么这个 key 返回特殊值 nil 。因此，该命令永不失败。</p>
<h4 id="SETRANGE命令_-_覆写">SETRANGE命令 - 覆写</h4><p>SETRANGE命令是用 value 参数覆写(overwrite)给定 key 所储存的字符串值，从偏移量offset开始。<br>不存在的 key 当作空白字符串处理,语法格式：<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SETRANGE key <span class="built_in">offset</span> <span class="built_in">value</span></span><br></pre></td></tr></table></figure></p>
<p>示例 - 覆写name的值。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; SET name <span class="string">"jaak"</span></span><br><span class="line">OK</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; SETRANGE name <span class="number">4</span> <span class="string">"zhang"</span></span><br><span class="line">(integer) <span class="number">11</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; GET name</span><br><span class="line"><span class="string">"jaakzhang"</span></span><br></pre></td></tr></table></figure>
<p>SETRANGE命令会确保字符串足够长以便将 value 设置在指定的偏移量上，如果给定 key 原来储存的字符串长度比偏移量小(比如字符串只有 5 个字符长，但你设置的 offset 是 10 )，那么原字符和偏移量之间的空白将用零字节(zerobytes, “\x00” )来填充。<br>注意你能使用的最大偏移量是 2^29-1(536870911) ，因为 Redis 字符串的大小被限制在 512 兆(megabytes)以内。如果你需要使用比这更大的空间，你可以使用多个 key 。</p>
<h4 id="STRLEN命令_-_获取键值长度">STRLEN命令 - 获取键值长度</h4><p>STRLEN命令将会返回 key 所储存的字符串值的长度<br>语法格式：<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">STRLEN </span>key</span><br></pre></td></tr></table></figure></p>
<p>示例 - 获取name值的长度。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; <span class="function">STRLEN <span class="title">name</span></span><br><span class="line"><span class="params">(integer)</span> 9</span></span><br></pre></td></tr></table></figure></p>
<p>值得注意的是当 key 储存的不是字符串值时，返回一个错误。</p>
<h4 id="其他命令">其他命令</h4><p>除了前面提到的那些常用命令以外，还有很多其他的命令，真正用到的时候再来详细了解如何使用它。</p>
<p><strong>命令</strong>              　　　　　　　　　<strong>用途</strong><br><strong>GETSET</strong>  <em>设置键的字符串值，并返回旧值。</em><br><strong>GETRANGE</strong>    <em>得到字符串的子字符串存放在一个键。</em><br><strong>GETBIT</strong>  <em>对 key 所储存的字符串值，获取指定偏移量上的位(bit)。</em><br><strong>SETBIT</strong>  <em>对 key 所储存的字符串值，设置或清除指定偏移量上的位(bit)。</em><br><strong>SETNX</strong>   <em>将 key 的值设为 value ，当且仅当 key 不存在。</em><br><strong>MSETNX</strong>  <em>同时设置一个或多个 key-value 对，当且仅当所有给定 key 都不存在。</em><br><strong>PSETEX</strong>  <em>和 SETEX 命令相似，但它以毫秒为单位设置 key 的生存时间，而不是像 SETEX 命令那样，以秒为单位。</em><br><strong>INCR</strong>    <em>将 key 中储存的数字值增一。</em><br><strong>INCRBY</strong>  <em>将 key 所储存的值加上指定增量。</em><br><strong>INCRBYFLOAT</strong> <em>为 key 中所储存的值加上指定浮点数增量。</em><br><strong>DECR</strong>    <em>将 key 中储存的数字值减一。</em><br><strong>DECRBY</strong>  <em>将 key 所储存的值加上指定增量。</em></p>
<h3 id="哈希（Hash）操作命令">哈希（Hash）操作命令</h3><p>Redis Hashes是字符串字段和字符串值之间的映射,因此他们是展现对象的完美数据类型。</p>
<h4 id="HSET命令_-_添加键值">HSET命令 - 添加键值</h4><p>　　在 redis 中，使用HSET命令来将哈希表 key 中的域 field 的值设为 value<br>语法如下：<br><figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HSET <span class="built_in">key</span> field <span class="built_in">value</span></span><br></pre></td></tr></table></figure></p>
<p>示例 - 添加键name ，值为‘jaak zhang’。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; HSET man name <span class="string">"jaak zhang"</span> <span class="preprocessor"># 设置一个新域</span></span><br><span class="line">(integer) <span class="number">1</span></span><br></pre></td></tr></table></figure></p>
<p>如果 key 不存在，一个新的哈希表被创建并进行HSET操作。<br>如果域 field 已经存在于哈希表中，旧值将被覆盖。</p>
<h4 id="HMSET命令_-_添加多个值">HMSET命令 - 添加多个值</h4><p>除了HSET命令，HMSET命令的用途也是用来设置值，不同的是，HMSET一次可以设置多个 field-value (域-值)对设置到哈希表 key 中,语法如下：<br><figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HMSET <span class="built_in">key</span> field <span class="built_in">value</span> [field <span class="built_in">value</span> ...]</span><br></pre></td></tr></table></figure></p>
<p>示例 - 添加键age、sex。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; HMSET man age <span class="string">"24"</span> sex <span class="string">"男"</span></span><br><span class="line">OK</span><br></pre></td></tr></table></figure></p>
<p>如果 key 不存在，将会创建一个空的哈希表并执行HMSET操作。<br>如果添加的域已存在哈希表中，那么它将被覆盖。</p>
<h4 id="HGET命令_-_获取值">HGET命令 - 获取值</h4><p>127.0.0.1:6379 中如何获取key的值呢？HGET是用来获取指定 key 值的命令，语法如下:<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="label">HGET</span> key <span class="preprocessor">field</span></span><br></pre></td></tr></table></figure></p>
<p>示例 - 获取域name的值。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; HGET man name</span><br><span class="line"><span class="string">"jaak zhang"</span></span><br></pre></td></tr></table></figure></p>
<p>执行HGET命令，如果 key 存在，将返回哈希表 key 中给定域 field 的值，如果 key 不存在，则返回 (nil) 。</p>
<h4 id="HMGET命令_-_获取多个值">HMGET命令 - 获取多个值</h4><p>作为HMSET命令对应的获取命令，HMGET可以一次性获取哈希表 key 中，一个或多个给定域的值<br>基本语法：<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="label">HMGET</span> key <span class="preprocessor">field</span> [<span class="preprocessor">field</span> ...]</span><br></pre></td></tr></table></figure></p>
<p>示例 - 获取域name、age、sex的值。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; HMGET man  name age sex             </span><br><span class="line"><span class="preprocessor"># 返回值的顺序和传入参数的顺序一样</span></span><br><span class="line"><span class="number">1</span>) <span class="string">"jaak zhang"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"24"</span></span><br><span class="line"><span class="number">3</span>) <span class="string">"\xe7\x94\xb7"</span></span><br></pre></td></tr></table></figure></p>
<p>如果给定的域不存在于哈希表，那么返回一个 nil 值。<br>因为不存在的 key 被当作一个空哈希表来处理，所以对一个不存在的 key 进行HMGET操作将返回一个只带有 nil 值的表。</p>
<h4 id="HGETALL命令_-_获取全部值">HGETALL命令 - 获取全部值</h4><p>如果我们想要一次性获取全部域的值，很显然 HGET 和 HMGET 都是不合适的，所幸的是我们还有HGETALL命令，通过它，我们可以轻松的获取到全部域值，<br>基本语法：<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">HGETALL</span> key</span><br></pre></td></tr></table></figure></p>
<p>示例 - 获取man全部域的值。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt;HGETALL man</span><br><span class="line"><span class="number">1</span>) <span class="string">"name"</span>   <span class="preprocessor">#域</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"jaak zhang"</span> <span class="preprocessor">#值</span></span><br><span class="line"><span class="number">3</span>) <span class="string">"age"</span></span><br><span class="line"><span class="number">4</span>) <span class="string">"24"</span></span><br><span class="line"><span class="number">5</span>) <span class="string">"sex"</span></span><br><span class="line"><span class="number">6</span>) <span class="string">"\xe7\x94\xb7"</span></span><br></pre></td></tr></table></figure></p>
<p>在返回值里，紧跟每个域名(field name)之后是域的值(value)，所以返回值的长度是哈希表大小的两倍。</p>
<h4 id="HEXISTS命令_-_验证存在">HEXISTS命令 -  验证存在</h4><p>在应用环境中，我们经常会需要知道一个 key 中是否存在某个 field ，HEXISTS命令可以帮助我们达到这个目的<br>基本语法：<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="label">HEXISTS</span> key <span class="preprocessor">field</span></span><br></pre></td></tr></table></figure></p>
<p>示例 - 验证键number是否存在。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; <span class="function">HEXISTS man <span class="title">number</span> </span><br><span class="line"><span class="params">(integer)</span> 0</span></span><br></pre></td></tr></table></figure></p>
<p>查看哈希表 key 中，给定域 field 是否存在。<br>如果哈希表含有给定域，返回 1 。<br>如果哈希表不含有给定域，或 key 不存在，返回 0 。</p>
<h4 id="HKEYS命令_-_获取所有key">HKEYS命令 - 获取所有key</h4><p>我们经常会遇见这样的应用场景，比如在线用户列表、课堂列表等等，这时候我们可以使用HKEYS来获取哈希表 key 中的所有域<br>基本语法：<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">HKEYS</span> key</span><br></pre></td></tr></table></figure></p>
<p>示例 - 查看键man中所有的域。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; HKEYS man</span><br><span class="line"><span class="number">1</span>) <span class="string">"name"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"age"</span></span><br><span class="line"><span class="number">3</span>) <span class="string">"sex"</span></span><br></pre></td></tr></table></figure></p>
<p>当 key 存在时，将返回一个包含哈希表中所有域的表。 当 key 不存在时，返回一个空表。</p>
<h4 id="HLEN命令_-_获取域数量">HLEN命令 - 获取域数量</h4><p>HLEN命令将返回哈希表 key 中域的数量,什么时候会用到它呢？比如：在线聊天室，显示在线用户数<br>基本语法：<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">HLEN</span> key</span><br></pre></td></tr></table></figure></p>
<p>示例 - 查看man键中域的个数。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; <span class="function">HLEN <span class="title">man</span></span><br><span class="line"><span class="params">(integer)</span> 3</span></span><br></pre></td></tr></table></figure></p>
<p>当 key 存在时，将返回哈希表中域的数量。 当 key 不存在时，返回 0 。</p>
<h4 id="HDEL命令_-_删除">HDEL命令 - 删除</h4><p>有添加就必定有删除的需求，当我们想要删除哈希表 key 中的一个或多个指定域时，可以使用HDEL命令<br>基本语法：<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="label">HDEL</span> key <span class="preprocessor">field</span> [<span class="preprocessor">field</span> ...]</span><br></pre></td></tr></table></figure></p>
<p>示例 - 删除键man中的sex域。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; <span class="function">HDEL man <span class="title">sex</span></span><br><span class="line"><span class="params">(integer)</span> 1</span></span><br></pre></td></tr></table></figure></p>
<p>如果是不存在的域，那么它将被忽略掉。</p>

      
    </div>
    
  </div>
  
    


    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/2015/11/27/redis02/">
                    redis命令学习(二)
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/2015/11/16/mongoose01/">
                    mongoose简单总结
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#String操作命令"><span class="toc-number">1.</span> <span class="toc-text">String操作命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SET命令_-_添加键值"><span class="toc-number">2.</span> <span class="toc-text">SET命令  - 添加键值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SETEX命令_-_添加值和生存时间"><span class="toc-number">3.</span> <span class="toc-text">SETEX命令  - 添加值和生存时间</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GET命令_-_获取字符串"><span class="toc-number">4.</span> <span class="toc-text">GET命令 - 获取字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#APPEND命令_-_追加字符串"><span class="toc-number">5.</span> <span class="toc-text">APPEND命令 - 追加字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MSET命令_-_添加多个键值"><span class="toc-number">6.</span> <span class="toc-text">MSET命令 - 添加多个键值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MGET命令_-_获取多个键值"><span class="toc-number">7.</span> <span class="toc-text">MGET命令 - 获取多个键值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SETRANGE命令_-_覆写"><span class="toc-number">8.</span> <span class="toc-text">SETRANGE命令 - 覆写</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#STRLEN命令_-_获取键值长度"><span class="toc-number">9.</span> <span class="toc-text">STRLEN命令 - 获取键值长度</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#其他命令"><span class="toc-number">10.</span> <span class="toc-text">其他命令</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#哈希（Hash）操作命令"><span class="toc-number"></span> <span class="toc-text">哈希（Hash）操作命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#HSET命令_-_添加键值"><span class="toc-number">1.</span> <span class="toc-text">HSET命令 - 添加键值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HMSET命令_-_添加多个值"><span class="toc-number">2.</span> <span class="toc-text">HMSET命令 - 添加多个值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HGET命令_-_获取值"><span class="toc-number">3.</span> <span class="toc-text">HGET命令 - 获取值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HMGET命令_-_获取多个值"><span class="toc-number">4.</span> <span class="toc-text">HMGET命令 - 获取多个值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HGETALL命令_-_获取全部值"><span class="toc-number">5.</span> <span class="toc-text">HGETALL命令 - 获取全部值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HEXISTS命令_-_验证存在"><span class="toc-number">6.</span> <span class="toc-text">HEXISTS命令 -  验证存在</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HKEYS命令_-_获取所有key"><span class="toc-number">7.</span> <span class="toc-text">HKEYS命令 - 获取所有key</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HLEN命令_-_获取域数量"><span class="toc-number">8.</span> <span class="toc-text">HLEN命令 - 获取域数量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HDEL命令_-_删除"><span class="toc-number">9.</span> <span class="toc-text">HDEL命令 - 删除</span></a></li></ol>
</div>
<style>
    .left-col .switch-btn {
        display: none;
    }
    .left-col .switch-area {
        display: none;
    }
</style>

<input type="button" id="tocButton" value="隐藏目录"  title="点击按钮隐藏或者显示文章目录">

<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script>
    var valueHide = "隐藏目录";
    var valueShow = "显示目录";

    if ($(".left-col").is(":hidden")) {
        $("#tocButton").attr("value", valueShow);
    }

    $("#tocButton").click(function() {
        if ($("#toc").is(":hidden")) {
            $("#tocButton").attr("value", valueHide);
            $("#toc").slideDown(320);
            $(".switch-btn, .switch-area").fadeOut(300);
        }
        else {
            $("#tocButton").attr("value", valueShow);
            $("#toc").slideUp(350);
            $(".switch-btn, .switch-area").fadeIn(500);
        }
    })

    if ($(".toc").length < 1) {
        $("#toc, #tocButton").hide();
        $(".switch-btn, .switch-area").show();
    }
</script>




<div class="share">
    <div class="bdsharebuttonbox">
    <a href="#" class="bds_more" data-cmd="more"></a>
    <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
    <a href="#" class="bds_sqq" data-cmd="sqq" title="分享给 QQ 好友"></a>
    <a href="#" class="bds_copy" data-cmd="copy" title="复制网址"></a>
    <a href="#" class="bds_mail" data-cmd="mail" title="通过邮件分享"></a>
    <a href="#" class="bds_weixin" data-cmd="weixin" title="生成文章二维码"></a>
    </div>
    <script>
        window._bd_share_config={
            "common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
    </script>
</div>



    
      <div class="duoshuo" id="comments">
    <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="2015/11/24/redis01/" data-title="redis 命令学习(一)" data-url="http://yake987.github.io/2015/11/24/redis01/"></div>
    <!-- 多说评论框 end -->
    <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
    <script type="text/javascript">
    var duoshuoQuery = {short_name:"yakezhang"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
         || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>
    <!-- 多说公共JS代码 end -->
</div>

    




    <div class="scroll" id="post-nav-button">
        
            <a href="/2015/11/27/redis02/" title="上一篇: redis命令学习(二)">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/2015/11/16/mongoose01/" title="下一篇: mongoose简单总结">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2015/12/10/node01/">node.js</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/11/28/redis03/">redis命令学习(三)</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/11/27/redis02/">redis命令学习(二)</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/11/24/redis01/">redis 命令学习(一)</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/11/16/mongoose01/">mongoose简单总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/10/13/article01/">Hexo入住</a></li></ul>
    <script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
    <script>
        $(".post-list").addClass("toc-article");
        $(".post-list-item a").attr("target","_blank");
        $("#post-nav-button > a:nth-child(2)").click(function() {
            $(".fa-bars, .fa-times").toggle();
            $(".post-list").toggle(300);
            if ($(".toc").length > 0) {
                $("#toc, #tocButton").toggle(200, function() {
                    if ($(".switch-area").is(":visible")) {
                        $("#toc, .switch-btn, .switch-area").toggle();
                        $("#tocButton").attr("value", valueHide);
                        }
                    })
            }
            else {
                $(".switch-btn, .switch-area").fadeToggle(300);
            }
        })
    </script>




    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2016 yakeZhang
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的静态博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减双栏 Hexo 博客主题">Yelee</a> by MOxFIVE
            </div>
        </div>
        <div class="visit">
            <span id="busuanzi_container_site_pv" style='display:none'>
                <span id="site-visit" >本站到访数: 
                    <span id="busuanzi_value_site_uv"></span>
                </span>
            </span>
            <span id="busuanzi_container_page_pv" style='display:none'>
                <span id="page-visit">, 本页阅读量: 
                    <span id="busuanzi_value_page_pv"></span>
                </span>
            </span>
        </div>
    </div>
</footer>
    </div>
    <script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>




<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>

<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>